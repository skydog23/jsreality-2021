# Automatic Groups and Word-Acceptor (.wa) Files

*2026-01-28 — Q&A from development session*

## Question

Do you know anything about the theory of automatic groups? That is what generates the finite state automata .wa files that solve the word problem (decide if a word in the generators of the group should be accepted as a new element of the group), for example, c1.wa. I'm curious to know if it is realistic to want to be able to generate these .wa files for other groups for which I don't have any .wa files yet.

## Answer

### What we already have

`PlatycosmWaData.js` embeds word-acceptor `.wa` data for the platycosm groups (c1, c2, c3, c4, c6, c22, +a1, etc.) in the **KBMAG format**. These are DFA transition tables generated by **KBMAG** (Knuth-Bendix on Monoids and Automatic Groups), the software written by Derek Holt. `FiniteStateAutomaton.js` already parses this format. The automaton accepts exactly the **shortlex-reduced** words in the generators — during element enumeration, a candidate word is fed to the DFA, and if it reaches state 0 (dead/reject state), that word is not in shortlex-canonical form and can be pruned immediately, avoiding the expensive matrix-comparison duplicate check.

### The theory of automatic groups

A finitely generated group G is **automatic** if there exists:

1. A **word acceptor** (a DFA over the generators that accepts exactly one representative word per group element — the shortlex normal forms), and
2. **Word-difference machines** (one per generator, verifying that two accepted words represent elements differing by that generator).

The key theorem (Epstein, Cannon, Holt, Levy, Paterson, Thurston — the "ECHLPT" book *Word Processing in Groups*, 1992) is that the word acceptor alone already gives you enormous practical power: it lets you enumerate group elements without duplicates and in a canonical order.

### Which groups are automatic?

The class of automatic groups is very broad and covers most of the groups likely to be of interest:

- **All Coxeter groups** (both finite and infinite) are automatic. This includes all reflection groups in Euclidean, spherical, and hyperbolic space.
- **All word-hyperbolic groups** (in the sense of Gromov) are automatic. This covers all cocompact discrete groups acting on hyperbolic space.
- **Euclidean crystallographic groups** (space groups) are automatic — the platycosms are examples.
- **Braid groups**, mapping class groups of surfaces.
- **Right-angled Artin groups** and many other groups arising in geometric group theory.

Notable exceptions (groups that are NOT automatic): higher-rank lattices like SL(n, Z) for n >= 3, nilpotent groups that are not virtually abelian (e.g., the Heisenberg group), and solvable Baumslag-Solitar groups like BS(1,2).

### Feasibility of generating .wa files for new groups

This is **realistic and practical**, with the following caveats:

**What you need:**

1. A **finite presentation** of the group: generators and relations. For example, a Coxeter group is presented by generators s_i with relations (s_i s_j)^m_ij = 1.
2. The **KBMAG software** (or equivalent). KBMAG is freely available, originally as a standalone C program and also as a GAP package. It takes a rewriting system (generators + relations) as input and attempts Knuth-Bendix completion followed by automatic structure computation.

**The process:**

1. Write a `.rws` (rewriting system) input file describing your group's generators and relations.
2. Run `kbprog` (Knuth-Bendix completion) to try to find a confluent rewriting system.
3. If that succeeds, run `autgroup` (or `automata`) to compute the automatic structure, producing the `.wa` file.

**When it works well:**

- Coxeter groups with a known Coxeter matrix — KBMAG handles these reliably. If you wanted, say, the hyperbolic triangle group (2,3,7) or a compact hyperbolic Coxeter group, KBMAG would almost certainly produce a `.wa` file.
- Groups where the Knuth-Bendix procedure terminates with a finite confluent system. The resulting automaton is typically compact (small number of states).

**When it gets hard:**

- The Knuth-Bendix procedure is **not guaranteed to terminate** in general. For some groups, it may run forever or exhaust memory. In practice, it terminates for "nice" groups (Coxeter, hyperbolic, free products, etc.) but may fail for exotic presentations.
- Even when the group is automatic in theory, a bad choice of generators or presentation can make the computation impractical. The number of states in the word acceptor can be sensitive to the generator ordering.
- For very large or complicated groups, the transition tables can become huge.

**Alternative tools:**

- **GAP** with the KBMAG package: most convenient modern interface, well-documented.
- **MAF** (Monoid Automata Factory) by Alun Williams: a more modern alternative to KBMAG, sometimes handles cases KBMAG cannot.
- For Coxeter groups specifically, there is a theoretical recipe to construct the shortlex automaton directly from the Coxeter matrix, without running Knuth-Bendix (see Brink and Howlett, 1993 — "A finiteness property and an automatic structure for Coxeter groups"). This could even be implemented directly in JavaScript to avoid the external tool dependency entirely.

### Practical recommendation

For discrete groups acting on constant-curvature spaces (reflection groups, space groups, hyperbolic lattices), generating `.wa` files is very realistic:

1. **Coxeter/reflection groups**: Write the Coxeter presentation, run KBMAG or GAP. Should work out of the box.
2. **Space groups** beyond the platycosms: Also feasible; the presentations are well-known from the International Tables of Crystallography.
3. **Hyperbolic groups with compact fundamental domains**: KBMAG handles these well.

The main effort is writing the presentation in KBMAG's input format and running the tool. Once you have the `.wa` output, the existing `FiniteStateAutomaton.initializeFromText()` already parses it.

### References

- Epstein, Cannon, Holt, Levy, Paterson, Thurston. *Word Processing in Groups*. Jones and Bartlett, 1992.
- Brink, Howlett. "A finiteness property and an automatic structure for Coxeter groups." *Math. Ann.* 296, 179–190 (1993).
- Holt. *KBMAG — Knuth-Bendix on Monoids and Automatic Groups*. Available as a GAP package.
- Williams. *MAF — Monoid Automata Factory*. https://maffsa.sourceforge.net/
