## Geometry translation gaps: jreality-2021 (Java) → jsreality-2021 (JS)

Date: 2026-01-07

### Scope
Compared:
- Java: `/Users/gunn/Software/workspace/jreality-2021/src-core/de/jreality/geometry`
- JS: `/Users/gunn/Software/cursor/projects/jsreality-2021/src/core/geometry`

This is a best-effort static diff:
- **Missing classes**: Java `.java` files with no same-stem `.js` module in JS.
- **Missing methods**: public/protected Java method names not found as exported functions or class methods in the corresponding JS module (same stem).
- JS-only methods are also reported (often valid refactors/renames).

### Summary
- **Java classes**: 38
- **JS modules**: 12
- **Name-matched**: 10
- **Missing JS classes**: 28
- **JS-only modules** (no Java counterpart in this folder): 2

### Missing classes/modules (need translation)
- **`AbstractGeometryFactory`**: `AbstractGeometryFactory.java`
- **`AbstractIndexedFaceSetFactory`**: `AbstractIndexedFaceSetFactory.java`
- **`AbstractIndexedLineSetFactory`**: `AbstractIndexedLineSetFactory.java`
- **`AbstractPointSetFactory`**: `AbstractPointSetFactory.java`
- **`AbstractQuadMeshFactory`**: `AbstractQuadMeshFactory.java`
- **`BallAndStickFactory`**: `BallAndStickFactory.java`
- **`BezierPatchMesh`**: `BezierPatchMesh.java`
- **`CoordinateSystemBeautifier`**: `CoordinateSystemBeautifier.java`
- **`CoordinateSystemFactory`**: `CoordinateSystemFactory.java`
- **`FatIndexedFaceSetFactory`**: `FatIndexedFaceSetFactory.java`
- **`FrameFieldType`**: `FrameFieldType.java`
- **`GeometryAttributeListSet`**: `GeometryAttributeListSet.java`
- **`GeometryFactory`**: `GeometryFactory.java`
- **`GeometryMergeFactory`**: `GeometryMergeFactory.java`
- **`HeightFieldFactory`**: `HeightFieldFactory.java`
- **`OoNode`**: `OoNode.java`
- **`ParametricSurfaceFactory`**: `ParametricSurfaceFactory.java`
- **`ParametricTriangularSurfaceFactory`**: `ParametricTriangularSurfaceFactory.java`
- **`PointSetUtility`**: `PointSetUtility.java`
- **`PolygonalTubeFactory`**: `PolygonalTubeFactory.java`
- **`QuadMeshFactory`**: `QuadMeshFactory.java`
- **`QuadMeshUtility`**: `QuadMeshUtility.java`
- **`RemoveDuplicateInfo`**: `RemoveDuplicateInfo.java`
- **`SliceBoxFactory`**: `SliceBoxFactory.java`
- **`ThickenedSurfaceFactory`**: `ThickenedSurfaceFactory.java`
- **`TubeFactory`**: `TubeFactory.java`
- **`TubeFactoryBroken`**: `TubeFactoryBroken.java`
- **`TubeUtility`**: `TubeUtility.java`

### Modules present in JS but not in this Java folder
- **`SphereUtilityTest`**: `__tests__/SphereUtilityTest.js`
- **`index`**: `index.js`

### Partially translated modules (method-level gaps)
Ordered by “missing Java methods in JS” (descending).

#### `IndexedFaceSetFactory`
- **Java file**: `IndexedFaceSetFactory.java`
- **JS file**: `IndexedFaceSetFactory.js`
- **Java public/protected methods found**: 24
- **JS exported/class methods found**: 29
- **Missing in JS (18)**: `setEdgeAttribute`, `setEdgeColors`, `setEdgeCount`, `setEdgeIndices`, `setEdgeLabels`, `setEdgeRelativeRadii`, `setFaceAttributes`, `setUnwrapFaceIndices`, `setVertexAttribute`, `setVertexAttributes`, `setVertexColors`, `setVertexCoordinates`, `setVertexCount`, `setVertexLabels`, `setVertexNormals`, `setVertexRelativeRadii`, `setVertexTextureCoordinates`, `unwrapVertexAttributes`
- **JS-only methods (23)**: `PnNormalize`, `_generateEdgesFromFaces`, `_generateFaceNormals`, `_generateIndexLabels`, `_generateVertexNormals`, `_getGeometry`, `_setFaceAttribute`, `_setFaceAttributeRaw`, `getFaceCount`, `getIndexedFaceSet`, `getIndexedLineSet`, `getPointSet`, `isGenerateEdgesFromFaces`, `isGenerateFaceLabels`, `isGenerateFaceNormals`, `isGenerateVertexNormals`, `setGenerateEdgesFromFaces`, `setGenerateFaceLabels`, `setGenerateFaceNormals`, `setGenerateVertexNormals`, `setToLength`, `super`, `update`

#### `IndexedFaceSetUtility`
- **Java file**: `IndexedFaceSetUtility.java`
- **JS file**: `IndexedFaceSetUtility.js`
- **Java public/protected methods found**: 32
- **JS exported/class methods found**: 26
- **Missing in JS (17)**: `assignSmoothVertexNormals`, `assignVertexTangents`, `calculateVertexTangents`, `displayFaceNormals`, `equals`, `extractEdge`, `get`, `hashCode`, `makeConsistentOrientation`, `removeTextureCoordinateJumps`, `representAsSceneGraph`, `run`, `splitIfsToPrimitiveFaces`, `triangulateBarycentric`, `triangulateRectangularPatch`, `truncate`, `visit`
- **JS-only methods (11)**: `calculateAndSetFaceNormalsWithMetric`, `calculateFaceNormalsForSceneGraph`, `calculateFaceNormalsFromArrays`, `calculateFaceNormalsWithMetric`, `calculateVertexNormalsForSceneGraph`, `calculateVertexNormalsFromArrays`, `calculateVertexNormalsWithMetric`, `constructPolygonWithFactory`, `constructPolygonWithMetric`, `visitComponent`, `visitIndexedFaceSet`

#### `Primitives`
- **Java file**: `Primitives.java`
- **JS file**: `Primitives.js`
- **Java public/protected methods found**: 33
- **JS exported/class methods found**: 23
- **Missing in JS (16)**: `arrow`, `clippingPlane`, `closedCylinder`, `cone`, `cylinder`, `discreteTorusKnot`, `evaluate`, `getDimensionOfAmbientSpace`, `isImmutable`, `pyramid`, `regularAnnulus`, `texturedBox`, `texturedQuadrilateral`, `texturedQuadrilateralFactory`, `torus`, `wireframeSphere`
- **JS-only methods (6)**: `boxWithMetric`, `getSharedIcosahedron`, `pointWithLabel`, `regularGrid`, `sphereWithCenter`, `sphereWithMetric`

#### `GeometryUtility`
- **Java file**: `GeometryUtility.java`
- **JS file**: `GeometryUtility.js`
- **Java public/protected methods found**: 13
- **JS exported/class methods found**: 0
- **Missing in JS (13)**: `calculateAndSetFaceNormals`, `calculateAndSetNormals`, `calculateAndSetVertexNormals`, `calculateBoundingBox`, `calculateChildrenBoundingBox`, `calculateFaceNormals`, `calculateVertexNormals`, `flatten`, `getFactory`, `getMetric`, `getVectorLength`, `setFactory`, `setMetric`
- **JS-only methods**: (none detected)

#### `IndexedLineSetFactory`
- **Java file**: `IndexedLineSetFactory.java`
- **JS file**: `IndexedLineSetFactory.js`
- **Java public/protected methods found**: 15
- **JS exported/class methods found**: 21
- **Missing in JS (9)**: `setVertexAttribute`, `setVertexAttributes`, `setVertexColors`, `setVertexCoordinates`, `setVertexCount`, `setVertexLabels`, `setVertexNormals`, `setVertexRelativeRadii`, `setVertexTextureCoordinates`
- **JS-only methods (15)**: `_getEdgeCount`, `_getGeometry`, `_getPendingEdgeAttributes`, `_isGenerateEdgeLabels`, `_setEdgeAttribute`, `_setEdgeAttributeRaw`, `_setEdgeCount`, `getEdgeCount`, `getIndexedLineSet`, `getPointSet`, `isGenerateEdgeLabels`, `setEdgeNormals`, `setGenerateEdgeLabels`, `super`, `update`

#### `SphereUtility`
- **Java file**: `SphereUtility.java`
- **JS file**: `SphereUtility.js`
- **Java public/protected methods found**: 10
- **JS exported/class methods found**: 8
- **Missing in JS (2)**: `sphericalPatch`, `sphericalPatchFactory`
- **JS-only methods**: (none detected)

#### `BoundingBoxTraversal`
- **Java file**: `BoundingBoxTraversal.java`
- **JS file**: `BoundingBoxTraversal.js`
- **Java public/protected methods found**: 12
- **JS exported/class methods found**: 23
- **Missing in JS (1)**: `visit`
- **JS-only methods (12)**: `checkForBoundingBox`, `subContext`, `super`, `unionBox`, `unionVectors`, `visitClippingPlane`, `visitComponent`, `visitCylinder`, `visitGeometry`, `visitPointSet`, `visitSphere`, `visitTransformation`

#### `IndexedLineSetUtility`
- **Java file**: `IndexedLineSetUtility.java`
- **JS file**: `IndexedLineSetUtility.js`
- **Java public/protected methods found**: 14
- **JS exported/class methods found**: 20
- **Missing in JS (1)**: `run`
- **JS-only methods (7)**: `circleUnit`, `createCurveFactoryFromPointsWithFactory`, `createCurveFromPointsFlat`, `createCurveFromPointsFlatWithIndices`, `createCurveFromPointsFlatWithLineSet`, `createCurveFromPointsWithLineSet`, `removeVertexFromEdge`

#### `PointSetFactory`
- **Java file**: `PointSetFactory.java`
- **JS file**: `PointSetFactory.js`
- **Java public/protected methods found**: 10
- **JS exported/class methods found**: 21
- **Missing in JS (1)**: `setVertexAttributes`
- **JS-only methods (12)**: `_generateIndexLabels`, `_getDirty`, `_getGeometry`, `_getPendingAttributes`, `_setVertexAttribute`, `_setVertexAttributeRaw`, `getMetric`, `getVertexCount`, `isGenerateVertexLabels`, `setGenerateVertexLabels`, `setMetric`, `update`

#### `BoundingBoxUtility`
- **Java file**: `BoundingBoxUtility.java`
- **JS file**: `BoundingBoxUtility.js`
- **Java public/protected methods found**: 3
- **JS exported/class methods found**: 7
- **Missing in JS**: (none detected)
- **JS-only methods (4)**: `calculateBoundingBoxFromComponent`, `calculateBoundingBoxFromPointSet`, `calculateBoundingBoxFromSphere`, `calculateBoundingBoxFromVertices`

### Notes / limitations
- This diff is **name-based** (filename stem matching). If a Java class was translated into a differently named JS module, it will appear as “missing”.
- Java overloads collapse to runtime dispatch in JS; this report checks **method names only**, not signatures.
- JS parsing is heuristic; it may count helper functions or miss methods defined via dynamic patterns.
